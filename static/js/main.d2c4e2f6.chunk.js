(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{63:function(t,a,e){},64:function(t,a,e){},97:function(t,a,e){"use strict";e.r(a);var n=e(0),i=e.n(n),s=e(9),r=e.n(s),o=(e(63),e(64),e(16)),h=e(17),c=e(21),p=e(20),l=e(40),d=e(41),u=e(57),M=e(6),f=e(39),g=e(25),j=e.n(g),m=e(36),y=e(42),b=e(26),v=e(58),w=e(3),x=e(34),O=e(31),L=e.n(O),S=e(1),R=function(t){Object(c.a)(e,t);var a=Object(p.a)(e);function e(t){var n;return Object(o.a)(this,e),(n=a.call(this,t)).handleChange=function(t){n.setState({address:t})},n.handleSelect=function(t){Object(O.geocodeByAddress)(t).then((function(t){return Object(O.getLatLng)(t[0])})).then((function(t){n.props.changeCenter(t)})).catch((function(t){return console.error("Error",t)}))},n.state={address:"",mapRef:n.props.mapRef,center:n.center},n}return Object(h.a)(e,[{key:"render",value:function(){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(L.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect,children:function(t){var a=t.getInputProps,e=t.suggestions,n=t.getSuggestionItemProps,i=t.loading;return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"search",children:Object(S.jsx)("input",Object(w.a)({id:"search"},a({placeholder:"Search Places ...",className:"location-search-input"})))}),Object(S.jsxs)("div",{className:"autocomplete-dropdown-container",children:[i&&Object(S.jsx)("div",{children:"Loading..."}),e.map((function(t){var a=t.active?"suggestion-item--active":"suggestion-item",e=t.active?{backgroundColor:"#EAEAEA",cursor:"pointer"}:{backgroundColor:"#dddff6",cursor:"pointer"};return Object(S.jsx)("div",Object(w.a)(Object(w.a)({},n(t,{className:a,style:e})),{},{children:Object(S.jsx)("span",{children:t.description})}))}))]})]})}})})}}]),e}(i.a.Component),I=function(t){Object(c.a)(e,t);var a=Object(p.a)(e);function e(t){var n;return Object(o.a)(this,e),(n=a.call(this,t)).displayLayer=function(t){n.props.getLayer(t)},n.state={layers:n.props.layers},n}return Object(h.a)(e,[{key:"render",value:function(){var t=this;this.state.layers;return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("ul",{style:{display:"inline-block"},children:[Object(S.jsx)("strong",{children:":\u05d1\u05d7\u05e8 \u05e9\u05db\u05d1\u05d4 \u05dc\u05d4\u05e6\u05d2\u05d4"}),Object.keys(this.state.layers).map((function(a,e){return Object(S.jsx)("div",{style:{marginTop:"5px"},children:Object(S.jsxs)("label",{className:"form-check-label",for:"flexCheckDefault",children:[Object(S.jsx)("input",{value:a,style:{margin:"3px"},onChange:t.displayLayer,className:"form-check-input",type:"checkbox",id:"flexCheckDefault"}),t.state.layers[a].name]})},e)}))]})})}},{key:"componentWillReceiveProps",value:function(t){this.setState({layers:t.layers})}},{key:"componentWillUnmount",value:function(){this.setState=function(t,a){}}}]),e}(n.Component),T={LatLng:function(t,a,e,n){this.lat=t,this.lng=a,this.alt=e||0,this.precision=n||5}};T.LatLng.prototype.toString=function(){function t(t,a){var e=Math.pow(10,a||0);return Math.round(t*e)/e}return t(this.lat,this.precision)+" "+t(this.lng,this.precision)},T.LatLng.prototype.convertGrid=function(t,a,e){var n=t.latLngToPoint(this,0),i=e.translate(n);return a.pointToLatLng(i)},T.latlngFromString=function(t){var a=new RegExp("^(-?\\d+(?:\\.\\d*)?)(?:(?:\\s*[:,]?\\s*)|\\s+)(-?\\d+(?:\\.\\d*)?)$","i"),e=t.match(a);if(e){var n=parseFloat(e[1],10),i=parseFloat(e[2],10);return new T.LatLng(n,i)}throw"could not parse latlng"},T.Point=function(t,a,e){this.y=a,this.x=t,this.z=e||0},T.Point.prototype.toString=function(){return Math.round(this.x)+" "+Math.round(this.y)},T.Translation=function(t,a,e){this.dx=t,this.dy=a,this.dz=e},T.Translation.prototype.translate=function(t){return new T.Point(t.x+this.dx,t.y+this.dy,t.z+this.dz)},T.Translation.prototype.inverse=function(){return new T.Translation(-this.dx,-this.dy,-this.dz)},T.Ellipsoid=function(t,a){this.a=t,this.b=a,this.e2=(Math.pow(t,2)-Math.pow(a,2))/Math.pow(t,2)},T.Ellipsoid.prototype.pointToLatLng=function(t){for(var a=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)),e=Math.atan2(t.z,a*(1-this.e2));;){var n=this.a/Math.sqrt(1-this.e2*Math.pow(Math.sin(e),2)),i=Math.atan2(t.z+this.e2*n*Math.sin(e),a);if(!(Math.abs(e-i)>1e-9))break;e=i}var s=i*(180/Math.PI),r=Math.atan2(t.y,t.x)*(180/Math.PI);return new T.LatLng(s,r)},T.Ellipsoid.prototype.latLngToPoint=function(t){var a=t.lat*(Math.PI/180),e=t.lng*(Math.PI/180),n=this.a/Math.sqrt(1-this.e2*Math.pow(Math.sin(a),2)),i=(n+t.alt)*Math.cos(a)*Math.cos(e),s=(n+t.alt)*Math.cos(a)*Math.sin(e),r=(n*(1-this.e2)+t.alt)*Math.sin(a);return new T.Point(i,s,r)},T.TM=function(t,a,e,n,i,s){this.ellipsoid=t,this.e0=a,this.n0=e,this.f0=n,this.lat0=i,this.lng0=s,this.radlat0=i*(Math.PI/180),this.radlng0=s*(Math.PI/180),this.af0=t.a*n,this.bf0=t.b*n,this.e2=(Math.pow(this.af0,2)-Math.pow(this.bf0,2))/Math.pow(this.af0,2),this.n=(this.af0-this.bf0)/(this.af0+this.bf0),this.n2=this.n*this.n,this.n3=this.n2*this.n},T.TM.prototype.Marc=function(t){return this.bf0*((1+this.n+5/4*this.n2+5/4*this.n3)*(t-this.radlat0)-(3*this.n+3*this.n2+21/8*this.n3)*Math.sin(t-this.radlat0)*Math.cos(t+this.radlat0)+(15/8*this.n2+15/8*this.n3)*Math.sin(2*(t-this.radlat0))*Math.cos(2*(t+this.radlat0))-35/24*this.n3*Math.sin(3*(t-this.radlat0))*Math.cos(3*(t+this.radlat0)))},T.TM.prototype.InitialLat=function(t){for(var a=(t-this.n0)/this.af0+this.radlat0,e=this.Marc(a),n=(t-this.n0-e)/this.af0+a;Math.abs(t-this.n0-e)>1e-5;)n=(t-this.n0-e)/this.af0+a,e=this.Marc(n),a=n;return n},T.TM.prototype.unproject=function(t){var a=t.x-this.e0,e=this.InitialLat(t.y),n=this.af0/Math.sqrt(1-this.e2*Math.pow(Math.sin(e),2)),i=n*(1-this.e2)/(1-this.e2*Math.pow(Math.sin(e),2)),s=n/i-1,r=Math.tan(e)/(2*i*n),o=Math.tan(e)/(24*i*Math.pow(n,3))*(5+3*Math.pow(Math.tan(e),2)+s-9*s*Math.pow(Math.tan(e),2)),h=Math.tan(e)/(720*i*Math.pow(n,5))*(61+90*Math.pow(Math.tan(e),2)+45*Math.pow(Math.tan(e),4)),c=180/Math.PI*(e-Math.pow(a,2)*r+Math.pow(a,4)*o-Math.pow(a,6)*h),p=Math.pow(Math.cos(e),-1)/n,l=Math.pow(Math.cos(e),-1)/(6*Math.pow(n,3))*(n/i+2*Math.pow(Math.tan(e),2)),d=Math.pow(Math.cos(e),-1)/(120*Math.pow(n,5))*(5+28*Math.pow(Math.tan(e),2)+24*Math.pow(Math.tan(e),4)),u=Math.pow(Math.cos(e),-1)/(5040*Math.pow(n,7))*(61+662*Math.pow(Math.tan(e),2)+1320*Math.pow(Math.tan(e),4)+720*Math.pow(Math.tan(e),6)),M=180/Math.PI*(this.radlng0+a*p-Math.pow(a,3)*l+Math.pow(a,5)*d-Math.pow(a,7)*u);return new T.LatLng(c,M)},T.TM.prototype.project=function(t){var a=t.lat*(Math.PI/180),e=t.lng*(Math.PI/180),n=this.af0/Math.sqrt(1-this.e2*Math.pow(Math.sin(a),2)),i=n*(1-this.e2)/(1-this.e2*Math.pow(Math.sin(a),2)),s=n/i-1,r=e-this.radlng0,o=this.Marc(a)+this.n0,h=n/2*Math.sin(a)*Math.cos(a),c=n/24*Math.sin(a)*Math.pow(Math.cos(a),3)*(5-Math.pow(Math.tan(a),2)+9*s),p=n/720*Math.sin(a)*Math.pow(Math.cos(a),5)*(61-58*Math.pow(Math.tan(a),2)+Math.pow(Math.tan(a),4)),l=o+Math.pow(r,2)*h+Math.pow(r,4)*c+Math.pow(r,6)*p,d=n*Math.cos(a),u=n/6*Math.pow(Math.cos(a),3)*(n/i-Math.pow(Math.tan(a),2)),M=n/120*Math.pow(Math.cos(a),5)*(5-18*Math.pow(Math.tan(a),2)+Math.pow(Math.tan(a),4)+14*s-58*Math.pow(Math.tan(a),2)*s),f=this.e0+r*d+Math.pow(r,3)*u+Math.pow(r,5)*M;return new T.Point(f,l,0)},T.GRS80=new T.Ellipsoid(6378137,6356752.31414),T.WGS84=new T.Ellipsoid(6378137,6356752.314245),T.GRS80toWGS84=new T.Translation(-48,55,52),T.WGS84toGRS80=T.GRS80toWGS84.inverse(),T.ITM=new T.TM(T.GRS80,219529.584,626907.38999,1.0000067,31.734394,35.204517),T.point2ItmRef=function(t,a){function e(t,a){for(var e=new String(t);e.length<a;)e="0"+e;return e}var n=a||6;n<3&&(n=3),n>6&&(n=6);var i=Math.pow(10,6-n),s=Math.round(t.x/i),r=Math.round(t.y/i);return e(s,n)+" "+e(r,n)},T.itmRef2Point=function(t){var a;for(a=6;a>=3;a--){var e=new RegExp("^(\\d{"+a+"})\\s*:?\\s*(\\d{"+a+"})$","i"),n=t.match(e);if(n&&a>0){var i=Math.pow(10,6-a),s=parseInt(n[1],10)*i,r=parseInt(n[2],10)*i;return new T.Point(s,r)}}throw"Could not parse reference"},T.itm2gps=function(t){return this.ITM.unproject(t).convertGrid(this.GRS80,this.WGS84,this.GRS80toWGS84)},T.gps2itm=function(t){var a=t.convertGrid(this.WGS84,this.GRS80,this.WGS84toGRS80);return this.ITM.project(a)},T.itmRef2gps=function(t){var a=this.itmRef2Point(t);return this.itm2gps(a)},T.itmRef2gpsRef=function(t){return this.itmRef2gps(t).toString()},T.gpsRef2itm=function(t){var a=this.latlngFromString(t);return this.gps2itm(a)},T.gpsRef2itmRef=function(t,a){return this.point2ItmRef(this.gpsRef2itm(t),a||6)};var P=e(55),k=e.n(P),C=function(t){Object(c.a)(e,t);var a=Object(p.a)(e);function e(t){var n;return Object(o.a)(this,e),(n=a.call(this,t)).handleCenterCallBack=function(t){n.state.map.setCenter(t)},n.handleApiLoaded=function(t,a){n.setState({map:t})},n.mapOverlay=function(){var t=Object(b.a)(n),a=new window.google.maps.ImageMapType({getTileUrl:function(a,e){if(e>=16&&Object.keys(t.state.dynamicLayers).length>0){var n=t.tileCoordsToBBox(t.state.map,a,e,512,512),i=T.gpsRef2itmRef("".concat(n[0]," ").concat(n[1])).split(" "),s=T.gpsRef2itmRef("".concat(n[2]," ").concat(n[3])).split(" ");if(85e4>i[1]&&i[1]>35e4&&85e4>s[1]&&s[1]>35e4&&35e4>i[0]&&i[0]>5e4&&35e4>s[0]&&s[1]>5e4)return"https://ags.govmap.gov.il/proxy/proxy.ashx?http://govmap/arcgis/rest/services/AdditionalData/MapServer/export?dynamicLayers="+t.convertObjectToString()+"&dpi=96&transparent=true&format=png32&layers=show:"+t.state.layersIds+"&bbox="+i[0]+","+i[1]+","+s[0]+","+s[1]+"&bboxSR=2039&imageSR=2039&size="+t.state.map.getDiv().offsetWidth+","+t.state.map.getDiv().offsetHeight+"&f=image"}},isPng:!0,tileSize:new window.google.maps.Size(512,512),opacity:.4});n.state.map.overlayMapTypes.push(a)},n.convertObjectToString=function(){for(var t="[",a=[],e=0,i=Object.entries(n.state.dynamicLayers);e<i.length;e++){var s=Object(y.a)(i[e],2),r=(s[0],s[1]);a.push(r.id),t+="{'id':"+r.id+",'name':'"+r.name+"','source':{'type':'mapLayer','mapLayerId':"+r.id+"},'minScale':"+r.minScale+",'maxScale':"+r.maxScale+"},"}return t=t.slice(0,-1),t+="]",n.setState({layersIds:a}),t},n.getLayer=function(t){var a=t.target.value;if(!t.target.checked){var e=n.state.dynamicLayers;return delete e[a],void n.setState({dynamicLayers:e})}var i=n.state.dynamicLayers,s=n.state.layers[a];i[a]=s,n.setState({dynamicLayers:i})},n.state={center:{lat:31.771959,lng:35.217018},zoom:12,map:null,layers:[],dynamicLayers:{},layersIds:[]},n.mapRef=i.a.createRef((function(t){n.mapRef=t})),n}return Object(h.a)(e,[{key:"tileCoordsToBBox",value:function(t,a,e,n,i){var s=t.getProjection(),r=Math.pow(2,e),o=s.fromPointToLatLng(new window.google.maps.Point((a.x+1)*n/r,a.y*i/r)),h=s.fromPointToLatLng(new window.google.maps.Point(a.x*n/r,(a.y+1)*i/r));return[o.lat(),o.lng(),h.lat(),h.lng()]}},{key:"initLayers",value:function(){var t=Object(m.a)(j.a.mark((function t(){var a,e,n,i,s,r,o,h,c,p,l,d;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.post("https://cors.bridged.cc/https://ags.govmap.gov.il/Layers/GetTocLayers",{Headers:{origin:"127.0.0.1:3000"}});case 2:for(a=t.sent,e=a.data.data["\u05e9\u05db\u05d1\u05d5\u05ea \u05de\u05de\u05e9\u05dc\u05d4 \u05d5\u05de\u05d5\u05e1\u05d3\u05d5\u05ea \u05e6\u05d9\u05d1\u05d5\u05e8"].layers,n={},i=0,s=0,r=Object.entries(e);s<r.length;s++)o=Object(y.a)(r[s],2),o[0],h=o[1],c=h.layerID,p=h.caption,l=h.minScale,d=h.maxScale,n[i]={id:c,name:p,source:{type:"mapLayer",mapLayerId:c},minScale:l,maxScale:d},i+=1;this.setState({layers:n});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("br",{}),Object(S.jsxs)("div",{className:"grid-container",children:[Object(S.jsxs)(x.a,{children:[Object(S.jsx)("script",{type:"text/javascript",src:"https://code.jquery.com/jquery-1.12.1.min.js"}),Object(S.jsx)("script",{type:"text/javascript",src:"https://www.govmap.gov.il/govmap/api/govmap.api.js"})]}),Object(S.jsx)("div",{className:"grid-child",children:Object(S.jsx)("div",{id:"map",style:{height:"100vh",width:"950px"},children:Object(S.jsx)(v.a,{ref:this.mapRef,bootstrapURLKeys:{key:"AIzaSyDReDgyRM1t9H2HncIec_v_zh2DeJGggT0",libraries:["geometry","drawing","places"]},defaultZoom:this.state.zoom,defaultCenter:this.state.center,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(a){var e=a.map,n=a.maps;return t.handleApiLoaded(e,n)},onZoomAnimationEnd:this.mapOverlay.bind(this)})})}),Object(S.jsxs)("div",{className:"grid-child",style:{marginTop:"20px"},children:[Object(S.jsx)(R,{id:"searchBar",mapRef:this.mapRef,center:this.center,changeCenter:this.handleCenterCallBack}),Object(S.jsx)("br",{}),Object(S.jsx)(I,{layers:this.state.layers,getLayer:this.getLayer.bind(this)})]})]})]})}},{key:"componentWillMount",value:function(){var t=Object(m.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initLayers();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),e}(n.Component),G=function(t){Object(c.a)(e,t);var a=Object(p.a)(e);function e(){var t;Object(o.a)(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(t=a.call.apply(a,[this].concat(i))).switcher=function(){return Object(S.jsxs)(M.c,{children:[Object(S.jsx)(M.a,{path:"/map",children:Object(S.jsx)(C,{})}),Object(S.jsx)(M.a,{path:"/",children:Object(S.jsx)(C,{})})]})},t}return Object(h.a)(e,[{key:"render",value:function(){return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(f.a,{children:[Object(S.jsx)(l.a,{bg:"dark",variant:"dark",children:Object(S.jsxs)(u.a,{children:[Object(S.jsx)(l.a.Brand,{children:"Urbanico"}),Object(S.jsx)(d.a,{className:"me-auto",children:Object(S.jsx)(d.a.Link,{as:f.b,to:"/map",children:"Map"})})]})}),Object(S.jsx)("div",{children:this.switcher()})]})})}}]),e}(n.Component);var z=function(){return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(G,{}),Object(S.jsx)("div",{className:"App"})]})},F=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,99)).then((function(a){var e=a.getCLS,n=a.getFID,i=a.getFCP,s=a.getLCP,r=a.getTTFB;e(t),n(t),i(t),s(t),r(t)}))};e(96);r.a.render(Object(S.jsx)(i.a.Fragment,{children:Object(S.jsx)(z,{})}),document.getElementById("root")),F()}},[[97,1,2]]]);
//# sourceMappingURL=main.d2c4e2f6.chunk.js.map